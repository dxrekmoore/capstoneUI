{"ast":null,"code":"var _jsxFileName = \"/Users/ardlanwang/Documents/GitHub/capstoneUI/src/uploading/client/src/components/Record/record.js\";\nimport React from 'react';\nimport './record.css';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Mp3Recorder = new MicRecorder({\n  bitRate: 128\n});\nvar lat;\nvar long;\nvar mp3file;\n\nfunction success(pos) {\n  var crd = pos.coords;\n  lat = crd.latitude;\n  long = crd.longitude;\n}\n\nfunction error(err) {\n  console.warn(`ERROR(${err.code}): ${err.message}`);\n}\n\nif (window.navigator.geolocation) {\n  //get location on recording start\n  window.navigator.geolocation.getCurrentPosition(success, error);\n}\n\nclass Record extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.start = () => {\n      if (this.state.isBlocked) {\n        //mic not enabled\n        console.log('Permission Denied');\n      } else {\n        //start recording\n        Mp3Recorder.start().then(() => {\n          this.setState({\n            isRecording: true\n          });\n        }).catch(e => console.error(e));\n      }\n    };\n\n    this.stop = () => {\n      //stop recording clicked\n      Mp3Recorder.stop().getMp3().then(_ref => {\n        let [buffer, blob] = _ref;\n        const blobURL = URL.createObjectURL(blob);\n        mp3file = new File([blob], \"audiofile.mp3\");\n        this.setState({\n          blobURL,\n          isRecording: false\n        });\n        console.log(mp3file);\n        console.log(\"lat: \" + lat);\n        console.log(\"long: \" + long);\n      }).catch(e => console.log(e));\n    };\n\n    this.state = {\n      isRecording: false,\n      blobURL: '',\n      isBlocked: false\n    };\n  }\n\n  componentDidMount() {\n    navigator.getUserMedia({\n      audio: true\n    }, () => {\n      console.log('Permission Granted');\n      this.setState({\n        isBlocked: false\n      });\n    }, () => {\n      console.log('Permission Denied');\n      this.setState({\n        isBlocked: true\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.start,\n          disabled: this.state.isRecording,\n          children: \"Record\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.stop,\n          disabled: !this.state.isRecording,\n          children: \"Stop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n          src: this.state.blobURL,\n          controls: \"controls\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Record;","map":{"version":3,"sources":["/Users/ardlanwang/Documents/GitHub/capstoneUI/src/uploading/client/src/components/Record/record.js"],"names":["React","MicRecorder","Mp3Recorder","bitRate","lat","long","mp3file","success","pos","crd","coords","latitude","longitude","error","err","console","warn","code","message","window","navigator","geolocation","getCurrentPosition","Record","Component","constructor","props","start","state","isBlocked","log","then","setState","isRecording","catch","e","stop","getMp3","buffer","blob","blobURL","URL","createObjectURL","File","componentDidMount","getUserMedia","audio","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './record.css';\nimport MicRecorder from 'mic-recorder-to-mp3';\n\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\nvar lat;\nvar long;\nvar mp3file;\n\nfunction success(pos){\n  var crd = pos.coords;\n  lat = crd.latitude;\n  long = crd.longitude;\n}\nfunction error(err){\n  console.warn(`ERROR(${err.code}): ${err.message}`);\n}\nif (window.navigator.geolocation) { //get location on recording start\n  window.navigator.geolocation\n  .getCurrentPosition(success, error);\n } \n\nclass Record extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      isRecording: false,\n      blobURL: '',\n      isBlocked: false,\n    };\n  }\n  \n  start = () => {\n\n    if (this.state.isBlocked) { //mic not enabled\n      console.log('Permission Denied');\n    } else { //start recording\n      Mp3Recorder\n        .start()\n        .then(() => {\n          this.setState({ isRecording: true });\n        }).catch((e) => console.error(e));\n    }\n  };\n  \n\n  stop = () => { //stop recording clicked\n    Mp3Recorder\n      .stop()\n      .getMp3()\n      .then(([buffer, blob]) => {\n        const blobURL = URL.createObjectURL(blob);\n        mp3file = new File([blob], \"audiofile.mp3\");\n        this.setState({ blobURL, isRecording: false });\n\n        console.log(mp3file);\n        console.log(\"lat: \" + lat);\n        console.log(\"long: \" + long);\n        \n      }).catch((e) => console.log(e));\n  };\n  \n  componentDidMount() {\n    navigator.getUserMedia({ audio: true },\n      () => {\n        console.log('Permission Granted');\n        this.setState({ isBlocked: false });\n      },\n      () => { \n        console.log('Permission Denied');\n        this.setState({ isBlocked: true })\n      },\n    );\n  }\n\n\n  render(){\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <button onClick={this.start} disabled={this.state.isRecording}>Record</button>\n          <button onClick={this.stop} disabled={!this.state.isRecording}>Stop</button>\n          <audio src={this.state.blobURL} controls=\"controls\" />\n        </header>\n      </div>\n    );\n  }\n}\n\nexport default Record;\n"]},"metadata":{},"sourceType":"module"}